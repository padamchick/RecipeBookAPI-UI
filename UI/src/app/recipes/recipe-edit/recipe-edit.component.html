<div class="container">
  <div class="col-xs 12">
    <form (ngSubmit)="onSubmit()" #f="ngForm" class="example-form">

      <div class="col-xs-12">
        <mat-form-field class="full-width">
          <mat-label>Name</mat-label>
          <input matInput type="text" id="name" name="name" [(ngModel)]="recipe.name" #name="ngModel">
        </mat-form-field>
      </div>

      <div class="col-xs-12">
        <mat-form-field class="full-width">
          <mat-label>Image URL</mat-label>
          <input matInput type="text" id="imagePath" name="imagePath" [(ngModel)]="recipe.imagePath"
            #imagePath="ngModel">
        </mat-form-field>
      </div>

      <div class="col-xs-12">
        <img fxFlex [src]="recipe.imagePath" class="img-fluid">
      </div>

      <div class="col-xs-12">
        <mat-form-field class="full-width">
          <mat-label>Description</mat-label>
          <textarea matInput cdkTextareaAutosize #autosize="cdkTextareaAutosize" id="description" name="description"
            [(ngModel)]="recipe.description"></textarea>
        </mat-form-field>
      </div>

      <div id="ingredients" class="col-xs-12">


        <mat-card>
          <mat-card-header>
            <mat-card-title class="d-flex align-items-center">
              <mat-icon>shopping_cart</mat-icon>
              Ingredients
            </mat-card-title>
          </mat-card-header>
              <mat-card-content *ngIf="this.recipe.ingredients.length>0">
            <table mat-table [dataSource]="dataSource">


              <!-- Name Column -->
              <ng-container matColumnDef="name">
                <mat-header-cell *matHeaderCellDef> Name </mat-header-cell>
                <mat-cell *matCellDef="let element"> {{element.name | lowercase}} </mat-cell>
              </ng-container>

              <!-- Amount Column -->
              <ng-container matColumnDef="amount">
                <mat-header-cell *matHeaderCellDef> Amount </mat-header-cell>
                <mat-cell *matCellDef="let element"> {{element.amount}} </mat-cell>
              </ng-container>

              <!-- Unit Column -->
              <ng-container matColumnDef="unit">
                <mat-header-cell *matHeaderCellDef> Unit </mat-header-cell>
                <mat-cell *matCellDef="let element"> {{element.unit}} </mat-cell>
              </ng-container>

              <!-- Action Column -->
              <ng-container matColumnDef="action">
                <mat-header-cell *matHeaderCellDef> Actions </mat-header-cell>
                <mat-cell *matCellDef="let element; let i=index" (click)="$event.stopPropagation()">
                  <div fxLayout>
                    <button type="button" mat-icon-button matTooltip="Edit ingredient" matTooltipPosition="above" (click)="editIngredient(element, i)">
                      <mat-icon>edit</mat-icon>
                    </button>
                    <button type="button" mat-icon-button matTooltip="Delete ingredient" matTooltipPosition="above" class="mat-red-icon" (click)="deleteIngredient(element, i)">
                      <mat-icon>delete</mat-icon>
                    </button>
                  </div>

                </mat-cell>
              </ng-container>

              <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
              <mat-row *matRowDef="let row; let i=index; columns: displayedColumns;"></mat-row>
            </table>
            </mat-card-content>

            <button type="button" mat-mini-fab class="theme-accent-dark sticky" id="add-button" matTooltip="Add new ingredient" matTooltipPosition="above" (click)="addIngredient()"><i class="material-icons" >add_shopping_cart</i></button>
          </mat-card>
          </div>
          <br>
          <div fxLayout fxLayoutAlign="flex-start center">
            <button type="button" mat-raised-button class="theme-accent-dark" type="submit">
              <div fxLayout fxLayoutAlign="center center" fxLayoutGap="5px">
                <mat-icon>save</mat-icon>
                <span>Save</span>
              </div>
            </button>
            <button type="button" mat-raised-button class="mat-warn" type="button" (click)="onCancel()">
              <div fxLayout fxLayoutAlign="center center" fxLayoutGap="5px">
                <mat-icon>clear</mat-icon>
                <span>Cancel</span>
              </div>
            </button>
          </div>

    </form>
    <br>
  </div>
</div>
